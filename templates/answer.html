<input type='text' placeholder='your answer' id='answerbox'>
<button id='submit' class='button button-primary'>Submit</button>
<script>
  // Check if the user is already logged in or not
  var hsh = Cookies.get('orfikPlayer');
  if (isOnQuestionPage === true & hsh === undefined){
    window.location.href = '/';
  }
  // Ping api server telling it that a user has found a question.
  var data = JSON.stringify({'userHash': hsh, 'url': window.location.href});
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.open("POST", "{{ api_base}}/userFoundQuestion", true);
  xmlhttp.setRequestHeader("Content-Type", "application/json");
  xmlhttp.withCredentials = true;
  xmlhttp.onreadystatechange = function(){
  if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
      var dat = JSON.parse(xmlhttp.responseText);
    }
  }
  xmlhttp.send(data);
  // Things to do if a user submits an answer
  document.getElementById('submit').onclick = function (){
    var answer = document.getElementById('answerbox').value;
    var hash = sha512(answer);
    var url = '/' + hash + '.html';
    // Try to get see if the url exists
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", url, true);
    xmlhttp.withCredentials = true;
    xmlhttp.onreadystatechange = function(){
      if (xmlhttp.readyState == 4){
        if xmlhttp.status == 200){
          // looks like the answer is ok. Redirect the user to the new page.
          window.location.href = url;
        } else {
          // warn them somehow that their answer was not ok and to keep trying.
          document.getElementById('answerbox').value = '';
          alert('Try again');
        }
    }
    xmlhttp.send();
  }
</script>
